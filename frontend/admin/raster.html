<div class="container" ng-controller="RasterController as vm">

  <h1>PulseRaster <small>experimental</small></h1>
  <div class="well">
    <div class="row">
      <div class="col-md-4">
        <form class="preview-frame">
          <label class="open-image">
            <span class="open-image-text text-muted" ng-hide="vm.uploadedImage">
              Select...
            </span>

            <div ng-show="vm.uploadedImage">
              <raster-preview width="300" height="300"
                              img="vm.canvas_gray"
                              always-zoomed="false"
              />
            </div>

            <input id="file-input" type="file" accept="image/*" style="display: none;">
          </label>
        </form>
        <div ng-show="vm.uploadedImage" class="preview-subtext text-muted">
          {{vm.uploadedImage.width}} x {{vm.uploadedImage.height}} pixels
        </div>
      </div>

      <div class="col-md-4">
        <div class="preview-frame" ng-show="vm.uploadedImage">
          <raster-preview width="300" height="300"
                          img="vm.canvas_pulse"
                          always-zoomed="true"
          />
        </div>
      </div>
      
    </div>

  </div>
  <div class="row">
    <div class="well">
      <div class="panel-body">
        <form class="form-horizontal" role="form">
          <div class="form-group form-group-lg">
            <label class="col-md-3 control-label" for="power">Power</label>
            <div class="col-md-3">
              <input class="form-control input-lg" id="power" type="number" min="0" step="0.1" ng-model="vm.params.energy_density" ng-change="vm.recalculate()">
              <span class="help-block">energy per mmÂ²</span>
            </div>
          </div>
          <div class="form-group" role="form">
            <label class="col-md-3 control-label" for="width">Width (mm)</label>
            <div class="col-md-3">
              <input class="form-control" id="width" type="number" min="0.1" ng-model="vm.params.width" ng-change="vm.recalculate()">
            </div>
          </div>
          <div class="form-group" role="form">
            <label class="col-md-3 control-label" for="ppmm">Pulses per mm</label>
            <div class="col-md-3">
              <input class="form-control" id="ppmm" type="number" min="0" step="0.5" ng-model="vm.requested_ppmm" ng-change="vm.recalculate()">
            </div>
          </div>
          Selected pulse duration: {{vm.params.pulse}} ticks ({{vm.pulse_duration_us()|number:0}} microseconds)<br/>
          Actually doing {{vm.params.ppmm|number:1}} pulses per mm (requested: {{vm.requested_ppmm|number:1}})<br/>
        </form>
      </div>
    </div>
  </div>
</div>
